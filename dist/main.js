!function(){"use strict";let t={time:0,delta:1/6e4,t:0,width:c1.width,height:c1.height,canvas:c1,i:c1.getContext("2d"),l:{},o:{x:0,y:0,h:0},data:{},init:()=>{let e=t;window.u=e,e.i.translate(.5,.5),e.i.lineWidth=1,e.i.imageSmoothingEnabled=!1,c1.addEventListener("mousedown",(t=>{let i=c1.getBoundingClientRect();e.o.x=(t.pageX-i.x)/i.width*320,e.o.y=(t.pageY-i.y)/i.height*240,e.o.h=1})),c1.addEventListener("mousemove",(t=>{let i=c1.getBoundingClientRect();e.o.x=(t.pageX-i.x)/i.width*320,e.o.y=(t.pageY-i.y)/i.height*240})),e.time=performance.now(),e.update()},p(){for(let t in this.l)this.l[t].draw()},update(){let t=this,e=performance.now()-t.time;if(t.cursor("default"),e<t.delta||t.paused)requestAnimationFrame(t.update.bind(t));else{t.i.clearRect(0,0,320,240),t.i.imageSmoothingEnabled=!1,t.time+=e,t.t=e;for(let e in t.l)t.l[e].update();t.p(),t.o.h=0,requestAnimationFrame(t.update.bind(t))}},cursor(t){this.canvas.style.cursor=t}};window.u=t;class e{m=[1,0,0,1,0,0];reset(){return this.m=[1,0,0,1,0,0],this}multiply(t){let e=this,i=e.m,a=i[0]*t[0]+i[2]*t[1],r=i[1]*t[0]+i[3]*t[1],l=i[0]*t[2]+i[2]*t[3],n=i[1]*t[2]+i[3]*t[3],s=i[0]*t[4]+i[2]*t[5]+i[4],o=i[1]*t[4]+i[3]*t[5]+i[5];return e.m=[a,r,l,n,s,o],e}transform(t,e){let i=this.m;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}L(t,e){let i=this.m,a=1/(i[0]*i[3]-i[1]*i[2]),r=[i[3]*a,-i[1]*a,-i[2]*a,i[0]*a,a*(i[2]*i[5]-i[3]*i[4]),a*(i[1]*i[4]-i[0]*i[5])];return{x:t*r[0]+e*r[2]+r[4],y:t*r[1]+e*r[3]+r[5]}}translate(t,e){return this.multiply([1,0,0,1,t,e])}rotate(t,e=0){let i=e?t:t*Math.PI/180,a=Math.cos(i),r=Math.sin(i);return this.multiply([a,r,-r,a,0,0])}scale(t,e){return this.multiply([t,0,0,e,0,0])}v(t,e,i=0){let a=i?1:Math.PI/180;return this.multiply([1,Math.tan(e*a),Math.tan(t*a),1,0,0])}}class i{x=0;y=0;width=0;height=0;scale={x:1,y:1};origin={x:.5,y:.5};angle=0;matrix=new e;background=0;alpha=1;active=1;k=1;parent=0;j=[];u=window.u;constructor(t={}){Object.assign(this,t),this.q()}q(){let t=this;t.matrix.reset(),t.parent&&(t.matrix.multiply(t.parent.matrix.m),t.matrix.translate(t.parent.x,t.parent.y)),t.matrix.rotate(t.angle).translate(-t.width*t.origin.x,-t.height*t.origin.y).scale(t.scale.x,t.scale.y)}update(){let t=this,e=game.o;t.active&&(t.q(),(!t.parent||t.parent.k)&&t.k&&t.contain(e.x,e.y)&&(t.emit("hover"),e.h&&t.emit("click")))}M(){let t=this;return t.active&&t.alpha?(t.u.i.setTransform(...t.matrix.m),t.u.i.globalAlpha=t.alpha,1):0}draw(){let t=this;t.M()&&t.background&&(t.u.i.fillStyle=t.background,t.u.i.fillRect(t.x,t.y,t.width,t.height))}contain(t,e){let i=this,a=i.matrix.L(t,e);return a.x>i.x&&a.x<i.x+i.width&&a.y>i.y&&a.y<i.y+i.height}on(t,e){let i=this;return i.j[t]=i.j[t]||[],i.j[t].push([e]),i}emit(t,e=[]){let i=this;if(i.active&&i.j[t]){for(let a of i.j[t])a[0].call(a[1],...e);return i}}}function a(t){let e=parseInt(t[0],36),i=function(t){let e=parseInt(t[0],36),i=new RegExp(`.{1,${e}}`,"g"),a=t.slice(2).split("").reduce(((t,e)=>t+parseInt(e,36).toString(2).padStart(5,0)),parseInt(t[1],36).toString(2)),r=a.length%e;return r&&(a=a.padStart(a.length+e-r,0)),a.match(i).map((t=>parseInt(t,2)-1))}(t.slice(1));return Array.from({length:Math.ceil(i.length/e)},((t,a)=>i.slice(a*e,a*e+e)))}const r={0:"32l9kqda",1:"12la",2:"32l5laba",3:"32l5l9da",4:"32j9l9cm",5:"32l9d9da",6:"32l9dada",7:"32l5ipcm",8:"32l9lada",9:"32l9l9da",I:"32cpkql6",A:"32kplad9",D:"32l9cmba",P:"32kpkqd9",E:"32l9daba",O:"32l9d6b5",Z:"42d6apl5j9",_:"32j9lad6",T:"32l6b5ja",F:"32l5iqda",H:"42iqcqb6cm",R:"32ipcmba",U:"52kqj6j6imim",B:"42iqj9l5km",C:"32l9kqda",G:"32l9lab5",Q:"42d6b9d6ja",J:"32kpkqj6",K:"32l9d9da",N:"32l6b5ip",S:"32j9kqda",V:"52imimcpcpb5",W:"52imimj6j6kq",X:"52imcpb5cpim",Y:"32j9j5ip",$:"52laapb5clla",tt:"31vvv",et:"22alap",it:"22j6ap",rt:"32l5j5ap",lt:"22alb9",nt:"22j5al",st:"32ald9al"};for(let h in r)r[h]=a(r[h]);class l extends i{color="#000";size=1;ot=2;padding={x:0,y:0};ct=[""];constructor(t){super(t),Object.assign(this,t)}set text(t){let e=this,i=0;if(Array.isArray(t)){e.ct=Array.from(t);for(let t in e.ct)e.ct[t]=e.ct[t].toUpperCase()}else e.ct=[t.toUpperCase()];for(let a in e.ct){let t=[],l=0;for(let i in e.ct[a]){let n=r[e.ct[a].charAt(i)];n&&(t.push(n),l+=n[0].length)}l+=t.length-1,i=Math.max(i,l),e.ct[a]=t}e.width=i*e.size+2*e.padding.x,e.height=e.ct.length*(6+e.ot)-1*e.size-e.ot+2*e.padding.y}get text(){return this.ct}draw(){let t=this,e=t.x,i=t.y;if(t.M()){t.background&&(t.u.i.fillStyle=t.background,t.u.i.fillRect(t.x,t.y,t.width,t.height)),t.u.i.fillStyle=t.color;for(let a in t.ct){let r=t.padding.x;for(let l in t.ct[a]){let n=t.ct[a][l],s=t.padding.y;for(let a in n){let l=n[a];for(let a in l)l[a]&&t.u.i.fillRect(e+r+a*t.size,i+s,t.size,t.size);s+=t.size}r+=(n[0].length+1)*t.size}i+=6*t.size+t.ot}}}}class n extends i{name="";info=[];dt=[];ht;ut=1;constructor(t){super(t);let e=this;e.width=32,e.height=32,e.ft=document.createElement("canvas"),e.ft.width=128,e.ft.height=128,e.xt=e.ft.getContext("2d"),e.xt.translate(.5,.5),e.xt.lineWidth=1,e.xt.imageSmoothingEnabled=!1,Object.assign(e,t),e.on("hover",(()=>{e.alpha=.8,e.u.cursor("pointer")})),e.on("click",(()=>{console.log("click")}))}gt(){let t=this;t.xt.clearRect(0,0,128,128),t.xt.fillStyle="#fff",t.xt.fillRect(0,0,128,128);let e=new Path2D("M0 128 L 40 108 L 20 88 L 20 58 L 40 38 L 88 38 L 108 58 L 108 88 L 88 108 L 128 128 Z");t.xt.fillStyle="#666",t.xt.fill(e)}draw(){let t=this;t.M()&&(t.u.i.drawImage(t.ft,t.x,t.y,t.width,t.height),t.alpha=1)}}class s extends i{constructor(t){super(t);this.items=t.items??[]}add(t){let e=this;e.has(t)||(e.items.push(t),t.parent=e)}remove(t){let e=this,i=e.items.indexOf(t);-1!==i&&(e.items.splice(i,1),t.parent=0)}has(t){return this.items.includes(t)}getAll(){return this.items}update(){let t=this;if(t.active){super.update();for(let e of t.items)e.update()}}draw(){let t=this;if(t.M()){t.u.i.beginPath(),t.u.i.globalAlpha=t.alpha,t.u.i.fillStyle=t.background,t.u.i.fillRect(t.x,t.y,t.width,t.height);for(let e of t.items)e.draw()}}}class o extends s{constructor(){super({x:160,y:120,width:320,height:240});let t=this;t.wt=document.createElement("canvas"),t.wt.width=t.width,t.wt.height=t.height,t.xt=t.wt.getContext("2d"),t.xt.translate(.5,.5),t.xt.lineWidth=1,t.xt.imageSmoothingEnabled=!1,t.yt()}yt(){let t=this;t.xt.clearRect(0,0,t.width,t.height),t.xt.fillStyle="#aaa",t.xt.fillRect(0,0,t.width,t.height),t.xt.fillStyle="#a50",t.xt.lineWidth=6,t.xt.strokeStyle="#d84",t.xt.rect(2,20,t.width-6,t.height-40),t.xt.fill(),t.xt.filter="drop-shadow(2px 2px 2px #0004)",t.xt.stroke();let e=t.xt.getImageData(0,0,t.width,t.height),i=e.data;for(let a=0;a<i.length;a+=4){let t=Math.floor(8*Math.random())-4;i[a]+=t,i[a+1]+=t,i[a+2]+=t}t.xt.putImageData(e,0,0)}draw(){let t=this;if(t.M()){t.u.i.drawImage(t.wt,t.x,t.y,t.width,t.height);for(let e of t.items)e.draw()}}}class c extends s{constructor(){super({x:160,y:123,width:300,height:234});let t=this;t.wt=document.createElement("canvas"),t.wt.width=t.width,t.wt.height=t.height,t.xt=t.wt.getContext("2d"),t.xt.imageSmoothingEnabled=!1,t.yt()}yt(){let t=this;t.xt.clearRect(0,0,t.width,t.height);let e=new Path2D("M0 234 L 0 10 L 10 0 L 90 0 L 100 10 L 298 10 L 300 12 L 300 234 Z");t.xt.fillStyle="#dd8",t.xt.fill(e),t.xt.filter="drop-shadow(0px 0px 2px #0004)";let i=new Path2D("M15 250 L 15 14 L 295 14 L 295 250 Z");t.xt.fillStyle="#f0f0f0",t.xt.rotate(2*Math.PI/180),t.xt.fill(i),t.xt.setTransform(1,0,0,1,0,0),i=new Path2D("M10 234 L 10 20 L 20 15 L 290 15 L 290 234 Z"),t.xt.fill(i);let a=t.xt.getImageData(0,0,t.width,t.height),r=a.data;for(let l=0;l<r.length;l+=4){let t=Math.floor(8*Math.random())-4;r[l]+=t,r[l+1]+=t,r[l+2]+=t}t.xt.putImageData(a,0,0)}draw(){let t=this;if(t.M()){t.u.i.drawImage(t.wt,t.x,t.y,t.width,t.height);for(let e of t.items)e.draw()}}show(){this.active=1,this.emit("show")}hide(){this.emit("hide"),this.active=0}}class d extends c{bt;constructor(t){super(t);let e=this;e.Lt=new l({x:120,y:40,origin:{x:0,y:0},size:2}),e.vt=new l({x:120,y:60,origin:{x:0,y:0}}),e.kt=new l({x:30,y:122,origin:{x:0,y:0}}),e.jt=new l({x:280,y:220,origin:{x:1,y:.5},padding:{x:3,y:3},text:"close",color:"#fff",background:"#000"}),e.jt.on("hover",(()=>{e.jt.alpha=.8,e.u.cursor("pointer")})),e.jt.on("click",(()=>{e.hide()})),e.add(e.Lt),e.add(e.vt),e.add(e.kt),e.add(e.jt),Object.assign(this,t)}set qt(t){let e=this;e.bt=t,e.Lt.text=t.name,e.vt.text=t.info,e.kt.text=t.dt}get qt(){return this.bt}draw(){let t=this;if(t.M()){t.u.i.drawImage(t.wt,t.x,t.y,t.width,t.height),t.u.i.drawImage(t.qt.ft,t.x+20,t.y+28,72,72);for(let e of t.items)e.draw();this.jt.alpha=1}}}!function(){let t=game.l.board=new o,e=game.l.suspectFile=new d({active:0}),i=game.l.killerFile=new d({active:0}),a=new l({x:212,y:220,origin:{x:1,y:.5},padding:{x:3,y:3},text:"arrest",color:"#fff",background:"#c22"}),r=new l({x:250,y:220,origin:{x:1,y:.5},padding:{x:3,y:3},text:"protect",color:"#fff",background:"#22c"}),s=new n({x:160,y:46,name:""});s.gt(),s.on("click",(()=>{i.show(),t.k=0})),i.qt=s,game.data.killer=s,t.add(s),game.data.suspects=[];for(let l=0;l<32;l++){let i=new n({x:30+l%8*37,y:83+37*Math.floor(l/8)});i.on("click",(()=>{e.qt=i,e.show(),t.k=0})),i.name="Person "+(l+1),i.info=["Lorem ipsum dolor sit amte","- consectetur adipiscing elit","- sed do eiusmod tempor incididunt,","- ut labore et dolore magna aliqua"],i.dt=["Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do","eiusmod tempor incididunt ut labore et dolore magna aliqua.","Ut enim ad minim veniam, quis nostrud exercitation ullamco ","laboris nisi ut aliquip ex ea commodo consequat. Duis aute ","irure dolor in reprehenderit in voluptate velit esse cillum ","dolore eu fugiat nulla pariatur. Excepteur sint occaecat ","cupidatat non proident, sunt in culpa qui officia deserunt ","mollit anim id est laborum."],i.gt(),t.add(i),game.data.suspects.push(i)}e.on("hide",(()=>t.k=1)),a.on("hover",(()=>a.alpha=.8)),e.add(a),r.on("hover",(()=>r.alpha=.8)),e.add(r),i.on("hide",(()=>t.k=1))}(),t.init()}();
